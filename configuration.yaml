homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: 38.96874
  longitude: -77.03393
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 78
  # metric for Metric, imperial for Imperial
  unit_system: Metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/New_York
  # Customization file
  customize: !include customize.yaml
  whitelist_external_dirs:
    - /tmp

# logger:
#   default: debug

zone:
  - name: Home
    latitude: 38.96874
    longitude: -77.03393
    radius: 100
    icon: mdi:home
  - name: Collins
    latitude: 38.990599
    longitude: -77.413826
    radius: 300
    icon: mdi:briefcase
  - name: Pro Bono Center
    latitude: 38.901528
    longitude: -77.016012
    radius: 100
    icon: mdi:briefcase

person:
  - name: Shankar
    id: shankar
    device_trackers:
      - device_tracker.shankar_pixel
      - device_tracker.google_maps_100911281029769970893
    # user_id: 62fd3d74cac24c3e985e9e750f16cb64
  - name: Christine
    id: christine
    device_trackers:
      - device_tracker.christine_s9
      - device_tracker.google_maps_107286426735337214006

frontend:
  themes: !include themes.yaml

# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
# http:
#   base_url: example.duckdns.org:8123

duckdns:
  domain: !secret duckdns_domain
  access_token: !secret duckdns_token

# Discover some devices automatically
discovery:

google_location:

device_tracker:
  - platform: google_location
    username: !secret google_username
    password: !secret google_password
    max_gps_accuracy: 50
    scan_interval: 120 # seconds to scan for devices
    credentials_file: '/home/homeassistant/.homeassistant/location_sharing.cookies'
  - platform: xfinity
    host: 10.0.0.1

# Bayesian Sensors for Home detection for each person
binary_sensor:
    - platform: bayesian
      prior: 0.5
      name: 'Christine Presence'
      probability_threshold: 0.8
      device_class: 'presence'
      observations:
        - entity_id: 'device_tracker.christine_s9'
          prob_given_true: 0.9
          prob_given_false: 0.1
          platform: 'state'
          to_state: 'home'
        - entity_id: 'device_tracker.google_maps_107286426735337214006'
          prob_given_true: 0.5
          prob_given_false: 0.1
          platform: 'state'
          to_state: 'home'
    - platform: bayesian
      prior: 0.5
      name: 'Shankar Presence'
      probability_threshold: 0.8
      device_class: 'presence'
      observations:
        - entity_id: 'device_tracker.shankar_pixel'
          prob_given_true: 0.9
          prob_given_false: 0.2
          platform: 'state'
          to_state: 'home'
        - entity_id: 'device_tracker.google_maps_100911281029769970893'
          prob_given_true: 0.7
          prob_given_false: 0.4
          platform: 'state'
          to_state: 'home'
    # - platform: rest
    #   name: 'Nexus Motion'
    #   resource: http://10.0.0.4:8080/sensors.json?sense=motion_active
    #   value_template: '{{ value_json.motion_active.data[0][1][0] | round(0) }}'
    #   # sensor_class: motion


# darksky
sensor:
  - platform: darksky
    api_key: !secret darksky_api
    longitude: -77.033961
    latitude: 38.968746
    monitored_conditions:
      - temperature
      - apparent_temperature
      - nearest_storm_distance
      - nearest_storm_bearing
      - wind_speed
      - wind_gust
      - wind_bearing
      - cloud_cover
      - precip_probability
      - precip_type
      - precip_intensity
    scan_interval:
      minutes: 2
    # forecast: days into future 0-7 days
    #   - 0
    # hourly_forecast: # hours into future 0 - 48
    #   - 0
    #   - 6
    #   - 12
    #   - 18
    #   - 24
    #   - 30
    #   - 36
    #   - 42
    #   - 48
  - platform: systemmonitor
    resources:
      # - type: disk_use_percent
      #   arg: /home
      - type: memory_use_percent
      - type: processor_use
      - type: network_in
        arg: eth0
      - type: network_out
        arg: eth0
  - platform: template
    sensors:
      solar_angle:
        friendly_name: "Sun Angle"
        unit_of_measurement: 'Â°'
        value_template: "{{ '%+.1f'|format(state_attr('sun.sun', 'elevation')) }}"
  - platform: template
    sensors:
      ambient_light:
        friendly_name: 'Ambient Light'
        value_template: "{{ '%.2f'|format( (6 - states.sun.sun.attributes.elevation) + (1 - states.sensor.dark_sky_cloud_coverage|int/100)  ) }}"

  
upnp:
  sensors: false
  port_mapping: false

# Text to speech
tts:
  - platform: google_translate

no_ip:
  domain: !secret noip_domain
  username: !secret noip_username
  password: !secret noip_password

matrix:
  homeserver: https://matrix.org
  username: !secret matrix_username
  password: !secret matrix_password
  rooms:
    - "!RZInnssIgfBYMGRmtY:matrix.org"
    - "!kgrzdnIkVTmRcWQVWK:matrix.org"
  commands:
    - word: testword
      name: testword

signalmessenger:

notify:
  - name: matrix_notify
    platform: matrix
    default_room: "!kgrzdnIkVTmRcWQVWK:matrix.org"
  - name: twitter_notify
    platform: twitter
    consumer_key: !secret twitter_consumer_key
    consumer_secret: !secret twitter_consumer_secret
    access_token: !secret twitter_access_token
    access_token_secret: !secret twitter_access_token_secret
  - name: signal_notify
    platform: signalmessenger
    sender_nr: !secret signal_sender_number
    recp_nr: !secret signal_receiver_number
    signal_cli_path: /usr/local/bin
    signal_conf_path: /home/homeassistant/.local/share/signal-cli
  # - name: signal_group_notify
  #   platform: signalmessenger
  #   sender_nr: !secret signal_sender_number
  #   group: !secret signal_group_id
  #   signal_cli_path: /usr/local/bin
  #   signal_conf_path: /home/homeassistant/.local/share/signal-cli

hello_state:

hello_service:

# speedtest
speedtestdotnet:
  scan_interval:
    hours: 2
  monitored_conditions:
    - ping
    - download
    - upload
  manual: true

sun:
  elevation: 87

# fastdotcom:
#   scan_interval:
#     minutes: 120


# android_ip_webcam:
#   - host: 10.0.0.4
#     port: 8080
#     sensors:
#       - battery_temp
#       - battery_voltage
#       - light
#       - motion
#     switches:
#       - overlay
#       - video_recording

group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
