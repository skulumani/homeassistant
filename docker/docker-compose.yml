version: '3'
services:

  homeassistant:
    container_name: homeassistant
    image: homeassistant/home-assistant:latest
    # devices:
      # - /dev/ttyUSB0:/dev/ttyUSB0
    volumes:
      - /home/shankar/homeassistant:/config
      - /tmp:/tmp
      - /var/run/docker.sock:/var/run/docker.sock
      - /media/shankar/usbdrive/video:/media/camera
      # - /etc/localtime:/etc/localtime:ro
    ports:
      - "8123:8123"
    # privileged: true
    environment:
      - TZ=America/New_York
    restart: always
    network_mode: host

  signal-cli-rest-api:
    container_name: signalcli
    image: bbernhard/signal-cli-rest-api:latest
    ports:
      - "8080:8080" # map docker port 8080 to host port 8080.
    network_mode: "host"
    restart: always
    volumes:
      - "/home/shankar/signal-cli-config:/home/.local/share/signal-cli" # map "signal-cli-config" folder 
  
  omada-controller:
    container_name: omada-controller
    image: mbentley/omada-controller:latest
    restart: always
    network_mode: "host"
    environment:
      - TZ=America/New_York
      - MANAGE_HTTP_PORT=8088
      - MANAGE_HTTPS_PORT=8043
      - PORTAL_HTTP_PORT=8088
      - PORTAL_HTTPS_PORT=8843
    volumes:
      - omada-data:/opt/tplink/EAPController/data
      - omada-work:/opt/tplink/EAPController/work
      - omada-logs:/opt/tplink/EAPController/logs
  # glances:
  #   container_name: glances
  #   image: nicolargo/glances:latest-alpine
  #   restart: always
  #   pid: host
  #   network_mode: host
  #   ports:
  #     - "61208:61208"
  #   volumes:
  #     - /var/run/docker.sock:/var/run/docker.sock
  #   environment:
  #     - "GLANCES_OPT=-w"
volumes:
  omada-data:

  omada-work:

  omada-logs:

